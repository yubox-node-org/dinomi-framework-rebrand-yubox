!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3_timer={})}(this,function(t){"use strict";function n(){return x||(T(e),x=w.now()+d)}function e(){x=0}function i(){this._call=this._time=this._next=null}function o(t,n,e){var o=new i;return o.restart(t,n,e),o}function r(t,n,e){var o=new i;return o.restart(function(n){o.stop(),t(n)},n,e),o}function c(){n(),++_;for(var t,e=s;e;)(t=x-e._time)>=0&&e._call.call(null,t),e=e._next;--_}function u(t){x=(y=t||w.now())+d,_=p=0;try{c()}finally{_=0,l(),x=0}}function f(){var t=w.now(),n=t-y;n>v&&(d-=n,y=t)}function l(){for(var t,n=s,e=1/0;n;)n._call?(e>n._time&&(e=n._time),n=(t=n)._next):n=t?t._next=n._next:s=n._next;m=t,a(e)}function a(t){if(!_){p&&(p=clearTimeout(p));var n=t-x;n>24?(1/0>t&&(p=setTimeout(u,n)),h&&(h=clearInterval(h))):(h||(h=setInterval(f,v)),_=1,T(u))}}var s,m,_=0,p=0,h=0,v=1e3,y=0,x=0,d=0,w="object"==typeof performance?performance:Date,T="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,17)};i.prototype=o.prototype={restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?n():+i)+(null==e?0:+e),this._call||(m?m._next=this:s=this,m=this),this._call=t,this._time=i,a()},stop:function(){this._call&&(this._call=null,this._time=1/0,a())}};var b="0.3.2";t.version=b,t.now=n,t.timer=o,t.timerOnce=r,t.timerFlush=c});